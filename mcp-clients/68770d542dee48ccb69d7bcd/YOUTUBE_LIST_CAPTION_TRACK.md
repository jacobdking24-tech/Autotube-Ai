# YouTube List Caption Track

List all available caption tracks for a YouTube video.

## Installation/Import

```typescript
import { request as listYoutubeCaptions } from '@/sdk/mcp-clients/68770d542dee48ccb69d7bcd/YOUTUBE_LIST_CAPTION_TRACK';
```

## Function Signature

```typescript
async function request(params: ListCaptionsParams): Promise<ListCaptionsData>
```

## Parameters

### `ListCaptionsParams`

| Parameter | Type | Required | Description | Example |
|-----------|------|----------|-------------|---------|
| `video_id` | `string` | Yes | The YouTube video ID for which to retrieve caption tracks | `"dQw4w9WgXcQ"` |
| `part` | `string` | No | Comma-separated list of caption resource parts to include. Valid values: `"id"`, `"snippet"`, `"id,snippet"` | `"snippet"` (default) |

## Return Value

Returns a `Promise<ListCaptionsData>` containing:

- `etag` (string): The Etag of the resource
- `items` (CaptionItem[]): Array of caption tracks with the following properties:
  - `id`: Unique caption track ID
  - `etag`: Entity tag for the caption resource
  - `kind`: Resource type (always `"youtube#caption"`)
  - `snippet`: Caption details including:
    - `videoId`: Associated video ID
    - `language`: BCP-47 language tag
    - `name`: Display name for the caption track
    - `status`: Track status (`"serving"`, `"syncing"`, or `"failed"`)
    - `trackKind`: Type of caption (`"standard"`, `"asr"`, `"ASR"`, or `"forced"`)
    - `audioTrackType`: Audio track association
    - `isCC`: Whether it supports closed captions
    - `isDraft`: Draft status visibility
    - `lastUpdated`: ISO 8601 timestamp of last modification
- `kind`: API resource type (always `"youtube#captionListResponse"`)
- `eventId`: Serialized event ID (optional)
- `visitorId`: Visitor identifier (optional)

## Usage Examples

### Basic Usage - Get All Caption Tracks

```typescript
import { request as listYoutubeCaptions } from '@/sdk/mcp-clients/68770d542dee48ccb69d7bcd/YOUTUBE_LIST_CAPTION_TRACK';

async function getCaptions() {
  try {
    const result = await listYoutubeCaptions({
      video_id: 'dQw4w9WgXcQ'
    });
    
    console.log(`Found ${result.items.length} caption tracks`);
    
    result.items.forEach(caption => {
      console.log(`Caption ID: ${caption.id}`);
      if (caption.snippet) {
        console.log(`  Language: ${caption.snippet.language}`);
        console.log(`  Name: ${caption.snippet.name}`);
        console.log(`  Status: ${caption.snippet.status}`);
      }
    });
  } catch (error) {
    console.error('Failed to retrieve captions:', error);
  }
}
```

### Advanced Usage - Request Specific Parts

```typescript
import { request as listYoutubeCaptions } from '@/sdk/mcp-clients/68770d542dee48ccb69d7bcd/YOUTUBE_LIST_CAPTION_TRACK';

async function getCaptionDetails() {
  try {
    const result = await listYoutubeCaptions({
      video_id: 'L_jWHffIx5E',
      part: 'id,snippet'
    });
    
    // Filter for auto-generated captions
    const autoGeneratedCaptions = result.items.filter(
      caption => caption.snippet?.trackKind === 'asr' || caption.snippet?.trackKind === 'ASR'
    );
    
    console.log(`Found ${autoGeneratedCaptions.length} auto-generated captions`);
    
    // Find English captions
    const englishCaptions = result.items.filter(
      caption => caption.snippet?.language === 'en'
    );
    
    if (englishCaptions.length > 0) {
      console.log('English caption available:', englishCaptions[0].id);
    }
  } catch (error) {
    console.error('Error:', error);
  }
}
```

### Filter by Language

```typescript
import { request as listYoutubeCaptions } from '@/sdk/mcp-clients/68770d542dee48ccb69d7bcd/YOUTUBE_LIST_CAPTION_TRACK';

async function findCaptionByLanguage(videoId: string, languageCode: string) {
  try {
    const result = await listYoutubeCaptions({
      video_id: videoId,
      part: 'snippet'
    });
    
    const matchingCaptions = result.items.filter(
      caption => caption.snippet?.language === languageCode
    );
    
    if (matchingCaptions.length > 0) {
      console.log(`Found ${matchingCaptions.length} caption(s) in ${languageCode}`);
      return matchingCaptions[0];
    } else {
      console.log(`No captions found in ${languageCode}`);
      return null;
    }
  } catch (error) {
    console.error('Error finding captions:', error);
    throw error;
  }
}

// Usage
findCaptionByLanguage('dQw4w9WgXcQ', 'es'); // Find Spanish captions
```

## Error Handling

The function may throw errors in the following cases:

1. **Missing Required Parameter**: If `video_id` is not provided
   ```typescript
   Error: Missing required parameter: video_id
   ```

2. **Invalid MCP Response**: If the MCP response format is incorrect
   ```typescript
   Error: Invalid MCP response format: missing content[0].text
   ```

3. **JSON Parsing Error**: If the response cannot be parsed as JSON
   ```typescript
   Error: Failed to parse MCP response JSON: [error details]
   ```

4. **Tool Execution Failure**: If the YouTube API call fails
   ```typescript
   Error: MCP tool execution failed
   // or
   Error: [specific error message from the API]
   ```

5. **No Data Returned**: If the tool succeeds but returns no data
   ```typescript
   Error: MCP tool returned successful response but no data
   ```

### Error Handling Example

```typescript
import { request as listYoutubeCaptions } from '@/sdk/mcp-clients/68770d542dee48ccb69d7bcd/YOUTUBE_LIST_CAPTION_TRACK';

async function safeGetCaptions(videoId: string) {
  try {
    const result = await listYoutubeCaptions({ video_id: videoId });
    return result;
  } catch (error) {
    if (error instanceof Error) {
      if (error.message.includes('Missing required parameter')) {
        console.error('Video ID is required');
      } else if (error.message.includes('MCP tool execution failed')) {
        console.error('YouTube API error - video may not exist or captions may be disabled');
      } else {
        console.error('Unexpected error:', error.message);
      }
    }
    return null;
  }
}
```

## Notes

- The `part` parameter defaults to `"snippet"` if not specified
- Caption tracks may include auto-generated captions (ASR) and manually uploaded captions
- Some videos may have no caption tracks available
- The `snippet` object contains detailed information about each caption track
- Caption status can be `"serving"` (available), `"syncing"` (processing), or `"failed"` (error)
- Use the `trackKind` property to distinguish between standard captions and auto-generated ones